<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <link href="/css/fonts.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/mit_app_inventor.css">
    <script type="text/javascript">
     <!--//--><![CDATA[// ><!--

                                   var gotoappinventor = function() {
                                       var referrer = document.location.pathname;
                                       var patt = /.*hour-of-code.*/;
                                       if (referrer.match(patt)) {
                                           window.open("http://code.appinventor.mit.edu/", "new");
                                       } else {
                                           window.open("http://ai2.appinventor.mit.edu/", "new");
                                       }
                                   }
     //--><!]]>
    </script>
    <title>Android, Where’s My Car?</title><script>
if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-31803258-1', 'auto');
  ga('send', 'pageview');
}
</script>
  
</head>
<body class="mit_app_inventor"><nav class="navbar navbar-expand-xl navbar-light">
    <a class="navbar-brand" href="/">
	<!--<img src="/images/logo.png" alt="Logo">-->
    </a>
    <!--<button type="button" class="btn create-btn" style="margin-right: 20px;" onclick="gotoappinventor();">Create Apps!</button>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent"
            aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle Navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarContent">
	<ul class="navbar-nav" style="margin-left: auto;">
	    <li class="nav-item dropdown">
		<a class="nav-link" href="http://example.com" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    About
		</a>
		<div class="dropdown-menu">
		    <a class="dropdown-item" href="/about-us">About App Inventor</a>
		    <a class="dropdown-item" href="/explore/our-team">Our Team</a>
		    <a class="dropdown-item" href="/explore/master-trainers">Master Trainers</a>
		    <a class="dropdown-item" href="/explore/app-month-gallery">App of the Month</a>
                    <a class="dropdown-item"
                       href="/ai2/ReleaseNotes">Release Notes</a>
                    <a class="dropdown-item" href="/about/termsofservice" target="_blank">Terms of Service</a>
		</div>
	    </li>
	    <li class="nav-item dropdown">
		<a class="nav-link" href="http://example.com" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    Educators
		</a>
		<div class="dropdown-menu">
		    <a class="dropdown-item" href="/explore/teach" target="_blank">Teach</a>
		    <a class="dropdown-item" href="/explore/ai2/tutorials">Tutorials</a>
		    <a class="dropdown-item" href="/explore/ai-with-mit-app-inventor">AI with App Inventor</a>
		</div>
	    </li>
	    <li class="nav-item dropdown">
		<a class="nav-link" href="/news" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    News
		</a>
		<div class="dropdown-menu">
		    <a class="dropdown-item" href="/explore/news">In the news</a>
		    <a class="dropdown-item" href="/explore/events">Events</a>
		    <a class="dropdown-item" href="/explore/stories">Stories from the field</a>
		</div>
	    </li>
	    <li class="nav-item dropdown">
		<a class="nav-link" href="/explore/resources" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    Resources
		</a>
		<div class="dropdown-menu">
                    <a class="dropdown-item" href="/explore/get-started">Get Started</a>
		    <a class="dropdown-item" href="/explore/library">Documentation</a>
		    <a class="dropdown-item" href="https://community.appinventor.mit.edu"
                       target="_blank">Forums</a>
		    <a class="dropdown-item" href="/explore/ai2/tutorials">Tutorials</a>
		    <a class="dropdown-item" href="/explore/books">Books</a>
		    <a class="dropdown-item"
                       href="https://github.com/mit-cml/appinventor-sources"
                       target="_blank">Open Source Information</a>
	            <a class="dropdown-item" href="/explore/research">Research</a>
                    <a class="dropdown-item" href="/explore/hour-of-code">Hour of Code</a>
                    <a class="dropdown-item" href="/explore/resources">Additional Resources</a>
		</div>
	    </li>
            <li class="nav-item dropdown">
		<a class="nav-link" href="http://example.com" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		    Blogs
		</a>
                <div class="dropdown-menu">
		    <a class="dropdown-item" href="/explore/blog">App Inventor Blog</a>
	        </div>
            </li>
        </ul>
        <div style="display: inline-flex;margin-left:auto;margin-right:0">
	    <a href="https://giving.mit.edu/give/to?fundId=3832320" target="_blank">
                <button type="button" class="btn donate-btn" style="margin-right: 20px;">Donate</button></a>
            <script>
             (function() {
                 var cx = '005719495929270354943:tlvxrelje-e';
                 var gcse = document.createElement('script');
                 gcse.type = 'text/javascript';
                 gcse.async = true;
                 gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                            '//www.google.com/cse/cse.js?cx=' + cx;
                 var s = document.getElementsByTagName('script')[0];
                 s.parentNode.insertBefore(gcse, s);
             })();
            </script>
            <gcse:searchbox-only></gcse:searchbox-only>
        </div>
	<!-- <form class="form-inline" action="/action_page.php">
	     <div class="form-group has-search">
	     <span class="fa fa-search form-control-feedback"></span>
	     <input type="text" class="form-control" placeholder="Search">
	     </div>
	     </form> 
    </div>-
</nav>-->
<div class="default-page">
            <div class="header">
	        <h1 class="font-weight-bold text-center offset-xl-2 col-xl-8"
                    style="color: white;">Android, Where’s My Car?</h1>
            </div>
            <div class="container-fluid">
                <h2 class="ai-header"><span style="color:green;">Android, Where's My Car?</span></h2>

<a href="/explore/sites/all/files/tutorials/wheresMyCar/wheresMyCar.zip"><img src="/explore/sites/all/files/ai2tutorials/wheresMyCar/android-where.jpg" style="float:right; width:20%;" /></a>

<p>You parked somewhere near the stadium, but when the concert ends you don't have a clue where the car is. The friends you came with are equally as clueless.</p>

<p>Fortunately you haven't lost your Android phone that never forgets anything, and you remember you have the hot new app, <span style="color:green;">Android, Where's My Car?</span>. With this app, you click a button when you park your car, and the Android uses its location sensor to record the car's GPS coordinates and address. Later, when you reopen the app, it shows you a map from where you are to the remembered location-- problem solved!</p>

<p><a href="http://www.flickr.com/photos/dailylifeofmojo/4128596089/">Photo</a> licensed under <a href="http://creativecommons.org/licenses/by/2.0/deed.en">Creative Commons</a></p>


<h4 class="ai-header">Getting Started</h4>

<p>The app demonstrates how to communicate with the Android location sensor, how to record data in the phone's long-term memory (database), and how you can open the Google Maps app from your app to show directions from one one location to another. It makes use of the following App Inventor components:</p>

<ul>
<li><b>Location Sensor</b></li>
<li><b>TinyDB</b> -- to store the data</li>
<li><b>ActivityStarter</b> -- to open a map</li>
</ul>

<h4 class="ai-header">The User Interface</h4>

<p>Here are the components for the <span style="color:green;">Android, Where's My Car?</span> app, as shown in the Component Designer:</p>

<img src="/explore/sites/all/files/ai2tutorials/wheresMyCar/WheresMyCarDesign.png" width="90%" />

<p>The user interface consists of labels to show location data and buttons to initiate events. Some labels just show static text, e.g., GPSLabel is the text "GPS:" that appears in the user interface. Others, such as CurrentLatLabel, will display dynamic data one the location sensor gets its readings. For these labels, a default value is set (0) here in the Component Designer.</p>

<p>The ActivityStarter1 component is used to launch the map when the user asks for directions. Its properties are only partially shown above. Here is how they should be specified:</p>

<table>
<tr style="background-color: #EFEFEF; font-weight: bold;">
<td>Property</td>
<td>Value</td>
</tr>
<tr>
<td>
<b>Action</b>
</td>
<td>android.intent.action.VIEW</td>
</tr>
<tr>
<td>
<b>ActivityClass</b>
</td>
<td>com.google.android.maps.MapsActivity</td>
</tr>
<tr>
<td>
<b>ActivityPackage</b>
</td>
<td>com.google.android.apps.maps</td>
</tr>
</table>
<p>&nbsp;</p>
<h4 class="ai-header">The App's Behavior</h4>

<p>Here are the blocks for the <span style="color: green;">Android, Where's My Car</span> app (the yellow annotations will also appear when you load this app into App Inventor):</p>

<img src="/explore/sites/all/files/ai2tutorials/wheresMyCar/WheresMyCarBlocks.png" width="95%" />

<p>Let's examine the four different event-handlers of the app, starting in the top-left and working around in counter-clockwise order.</p>

<p><span class="controlblock-ai2">LocationSensor1.LocationChanged</span>: This event occurs when the phone's location sensor first gets a reading, or when the phone is moved to produce a new reading. The event-handler just places the readings--latitude, longitude, and current (street) address-- into the corresponding "Current" labels so that they appear on the phone. The RememberButton is also enabled in this event-handler. Its enabled setting should be unchecked in the Component Designer because there is nothing for the user to remember until the sensor gets a reading.</p>

<p><span class="controlblock-ai2">RememberButton.Click</span>: When the user clicks the RememberButton , the location sensor's current readings are put into the "remember" labels and stored to the database as well. The DirectionsButton is enabled as it now makes sense for the user click on it to see a map (though it will make more sense once the user changes location).</p>

<p><span class="controlblock-ai2">DirectionsButton.Click</span>: When the user clicks the DirectionsButton , the event-handler builds a URL for a map and calls ActivityStarter to launch the Maps application and load the map. <span class="textblock-ai2">join</span> is used to build the URL to send to the Maps application. The resulting URL consists of the Maps domain along with two crucial parameters, saddr and daddr , which specify the start and destination for the directions. For this app, the saddr is set to the latitude and longitude of the current location, and the daddr is set to the latitude and longitude of the location that was "remembered" (the location of your car!).</p>

<p><span class="controlblock-ai2">Screen1.Initialize</span>: This event is always triggered when an app opens. To understand it, you have to envision the user recording the location of the car, then closing the app, then later re-opening the app. When the app re-opens, the user expects that the location remembered earlier should appear on the phone. To facilitate this, the event-handler queries the database (<span class="callblock-ai2">call TinyDB.GetValue</span>). If there is indeed a remembered address stored in the database-- the length of the stored address is greater than zero--the remembered latitude, longitude, and street addres are placed in the corresponding labels.</p>

<h4 class="ai-header">Variations</h4>

<ul>
<li>Create "Android, Where is Everyone?", an app that lets a group of people track each other's whereabouts. Whether your hiking or at the park, this app could help save time and even lives.</li>
<li>Create a "breadcrumb" app that tracks your (phone's) whereabouts by recording each location change. One interesting refinement would be to only record a new "breadcrumb" if the location has changed by a certain amount.</li>
</ul>

<h4 class="ai-header">Review</h4>
Lines and paragraphs break automatically.


<p>Here are some of the ideas covered in this tutorial:</p>

<ul>
<li>The <b>LocationSensor</b> component can report the phone's latitude, longitude, and current street address. Its LocationChanged event is triggered when sensor gets its first reading and when the reading changes (the phone has moved).</li>
<li>The <b>ActivityStarter</b> component can launch any app including Google Maps. For Maps, you set the DataUri property to the URL of the map you want to display. If you want to show directions, the URL will be of the form: http://maps.google.com/maps/?saddr=0.1,0.1&daddr=0.2,0.2, where the numbers are GPS coordinates.</li>
<li><span class="textblock-ai2">join</span> is used to piece together (concatenate) separate text items into a single text object. It allows you to concatenate dynamic data with static text. With the Maps URL, the GPS coordinates are the dynamic data.</li>
<li><b>TinyDB</b> allows you to store data persistently in the phone's database. Whereas the data in a variable or property is lost when an app closes, the data you store in the database can be loaded into your app each time it is opened.</li>
</ul>


<!--<h4 class="ai-header">Scan the Sample App to your Phone</h4>

<p>Scan the following barcode onto your phone to install and run the sample app.<p>

<img src="/explore/sites/all/files/ai2tutorials/wheresMyCar/AndroidBarcode.png" />


<h4 class="ai-header">Download Source Code</h4>

<p>If you'd like to work with this sample in App Inventor, download the <a href="/explore/sites/all/files/ai2tutorials/wheresMyCar/AndroidWheresMyCar_MIT.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>

<a href="http://cs.usfca.edu/~wolber/appinventor/bookSplits/ch7AndroidWhere.pdf">Download Refined Version (Book Chapter PDF)</a>


            </div>
            
            <!-- node: 486
                 Page Id:  -->
          <!--  <div class="footer background-green">
    <div class="row container">
	<div class="col-xl-3">
	    <h3>MIT App Inventor</h3>
	    <!-- <form class="form-inline" action="/action_page.php">
		 <div class="form-group has-search">
		 <span class="fa fa-search form-control-feedback"></span>
		 <input type="text" class="form-control" placeholder="Search">
		 </div>
		 </form> -->
	<!--</div>
	<div class="col-xl-6 legal text-center">
	    <ul>
		<li>
		    <a href="http://web.mit.edu" class="btn btn-link" role="button"
                       target="_blank">© 2012-2020 Massachusetts Institute of Technology</a>
		</li>
		<li>
		    <a href="http://creativecommons.org/licenses/by-sa/3.0/"
                       target="_blank" class="btn btn-link" role="button">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0</a>
		</li>
		<li>
		    <a href="/about/termsofservice"
                       target="_blank" class="btn btn-link" role="button">Terms of Service and Privacy Policy</a>
		</li>
	    </ul>
	</div>
	<div class="col-xl-3 links">
            <a href="https://community.appinventor.mit.edu" target="_blank">Support / Help</a><br>
            <a href="mailto:appinventor@mit.edu">Other Inquiries</a>
	    <div>
		<span>Twitter:</span>
		<a href="https://twitter.com/mitappinventor"
                   target="_blank" class="btn btn-link" role="button">@MITAppInventor</a>
		<div>
		    <div>
			<span>GitHub:</span>
			<a href="https://github.com/mit-cml" class="btn btn-link" role="button"
                           target="_blank">mit-cml</a>
			<div>
			</div>
	            </div>
	        </div>
            </div>
        </div>
    </div>
</div>
<script src="/js/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="/js/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script async src="/js/widgets.js" charset="utf-8"></script>
</div>-->
    </body>
</html>
